<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Registrieren</title>
<style>
  body { font-family: Arial; background: #f0f2f5; display:flex; justify-content:center; align-items:center; height:100vh; }
  .container { background:white; padding:30px; border-radius:12px; box-shadow:0 4px 15px rgba(0,0,0,0.2); width:350px; }
  h2 { text-align:center; margin-bottom:20px; }
  input { width:100%; padding:10px; margin:8px 0; border-radius:6px; border:1px solid #ccc; }
  button { width:100%; padding:10px; margin-top:10px; border:none; border-radius:6px; background:#007bff; color:white; font-weight:bold; cursor:pointer; }
  button:hover { background:#0056b3; }
  #error { color:red; min-height:20px; margin-top:10px; }
  .link { text-align:center; margin-top:15px; }
  .link a { color:#007bff; text-decoration:none; }
  .link a:hover { text-decoration:underline; }
</style>
</head>
<body>
<div class="container">
  <h2>Registrieren</h2>
  <input id="email" type="email" placeholder="E-Mail">
  <input id="password" type="password" placeholder="Passwort">
  <button id="registerBtn">Account erstellen</button>
  <p id="error"></p>
  <div class="link"><a href="login.html">Schon registriert? Login</a></div>
</div>

<script type="module">
  import { auth } from "./config.js";
  import { createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";

  document.getElementById("registerBtn").onclick = async () => {
    const email = document.getElementById("email").value.trim();
    const password = document.getElementById("password").value;
    const errorElem = document.getElementById("error");

    if(password.length < 6){
      errorElem.innerText = "Passwort muss mindestens 6 Zeichen lang sein.";
      return;
    }

    try {
      await createUserWithEmailAndPassword(auth, email, password);
      window.location.href = "login.html"; // Nach Registrierung direkt Login-Seite
    } catch (err) {
      if(err.code === "auth/invalid-email") errorElem.innerText = "Bitte gÃ¼ltige E-Mail-Adresse eingeben.";
      else if(err.code === "auth/email-already-in-use") errorElem.innerText = "Diese E-Mail ist bereits registriert.";
      else if(err.code === "auth/weak-password") errorElem.innerText = "Passwort zu schwach (mind. 6 Zeichen).";
      else errorElem.innerText = err.message;
    }
  };
</script>
</body>
</html>
